# eCAL Feeder
The purpose of this implementation is to input data received via eCAL into a `KUKSA.val` databroker. The topics transmitted by eCAL are in the form of protobuf, and based on the VSS description and data outlined in this format, it is possible to provide data to the data broker via the kuksa_client.

## Usage
1. Install Python requirements for both eCAL and KUKSA.val

```
sudo add-apt-repository ppa:ecal/ecal-5.12
sudo apt-get update
sudo apt-get install ecal
sudo apt install python3-ecal5

pip install kuksa-client
```

2. Use the following command to run the ecal2val.py

```
export PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python

python3 ecal2val.py
```

This assumes a running `KUKSA.val` databroker at `127.0.0.1:55555`.

3. For testing, run the mock_publisher.py

```
export PROTOCOL_BUFFERS_PYTHON_IMPLEMENTATION=python

python3 mock_publisher.py
```

4. vss_data_pb2.py in proto_struct directory is generated by following method.

```
sudo apt-get install protobuf-compiler

protoc --python_out=. vss_data.proto
```

This was successfully tested on Raspberry Pi 4B with Raspbian 11 (bullseye) and eCAL 5.12
